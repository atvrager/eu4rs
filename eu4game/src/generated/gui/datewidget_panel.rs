// AUTO-GENERATED by cargo xtask generate-gui-renderer
// Source: datewidget from parsed GUI files
// DO NOT EDIT - changes will be overwritten

#[allow(unused_imports)]
use crate::bmfont::BitmapFontCache;
use crate::gui::GuiRenderer;
use crate::gui::HitBoxCmd;
#[allow(unused_imports)]
use crate::gui::layout::rect_to_clip_space;
#[allow(unused_imports)]
use crate::gui::layout::{get_window_anchor, position_from_anchor, resolve_position};
use crate::gui::sprite_cache::SpriteCache;
#[allow(unused_imports)]
use crate::gui::types::{GfxDatabase, HitBox, Orientation, TextFormat};
#[allow(unused_imports)]
use crate::gui::widget_cache::{WidgetCache, render_gui_editbox, render_gui_text};
use crate::render::SpriteRenderer;

#[allow(unused_imports)]
use crate::gui::main_menu::MainMenuPanel;
#[allow(unused_imports)]
use crate::gui::speed_controls::SpeedControls;
#[allow(unused_imports)]
use crate::gui::topbar::TopBar;
#[allow(unused_imports)] // Not all types used by every panel
use crate::gui::{
    CountrySelectLeftPanel, CountrySelectRightPanel, CountrySelectTopPanel, LobbyControlsPanel,
};

impl GuiRenderer {
    pub(crate) fn load_datewidget_sprites(
        widget_cache: &mut WidgetCache,
        gfx_db: &GfxDatabase,
        sprite_cache: &mut SpriteCache,
        font_cache: &mut BitmapFontCache,
        device: &wgpu::Device,
        queue: &wgpu::Queue,
        sprite_renderer: &SpriteRenderer,
    ) {
        // Load sprites for datewidget panel
        widget_cache.get_or_load_sprite(
            "GFX_lobby_date_bg",
            gfx_db,
            sprite_cache,
            device,
            queue,
            sprite_renderer,
        );
        widget_cache.get_or_load_sprite(
            "GFX_arrow_up_small",
            gfx_db,
            sprite_cache,
            device,
            queue,
            sprite_renderer,
        );
        widget_cache.get_or_load_sprite(
            "GFX_arrow_down_small",
            gfx_db,
            sprite_cache,
            device,
            queue,
            sprite_renderer,
        );
        widget_cache.get_or_load_sprite(
            "GFX_arrow_up_small",
            gfx_db,
            sprite_cache,
            device,
            queue,
            sprite_renderer,
        );
        widget_cache.get_or_load_sprite(
            "GFX_arrow_down_small",
            gfx_db,
            sprite_cache,
            device,
            queue,
            sprite_renderer,
        );
        widget_cache.get_or_load_sprite(
            "GFX_arrow_up_small",
            gfx_db,
            sprite_cache,
            device,
            queue,
            sprite_renderer,
        );
        widget_cache.get_or_load_sprite(
            "GFX_arrow_down_small",
            gfx_db,
            sprite_cache,
            device,
            queue,
            sprite_renderer,
        );
        widget_cache.get_or_load_sprite(
            "GFX_arrow_left_big",
            gfx_db,
            sprite_cache,
            device,
            queue,
            sprite_renderer,
        );
        widget_cache.get_or_load_sprite(
            "GFX_arrow_left_small",
            gfx_db,
            sprite_cache,
            device,
            queue,
            sprite_renderer,
        );
        widget_cache.get_or_load_sprite(
            "GFX_arrow_right_big",
            gfx_db,
            sprite_cache,
            device,
            queue,
            sprite_renderer,
        );
        widget_cache.get_or_load_sprite(
            "GFX_arrow_right_small",
            gfx_db,
            sprite_cache,
            device,
            queue,
            sprite_renderer,
        );

        // Load fonts for textboxes with panel field mappings
        widget_cache.get_or_load_font("vic_22s", font_cache, device, queue, sprite_renderer);
    }

    pub(crate) fn render_datewidget<'a>(
        screen_size: (u32, u32),
        sprite_renderer: &'a SpriteRenderer,
        render_pass: &mut wgpu::RenderPass<'a>,
        queue: &wgpu::Queue,
        panel: &CountrySelectLeftPanel,
        widget_cache: &'a WidgetCache,
        hit_boxes: &mut Vec<(String, HitBox)>,
    ) {
        // Render datewidget panel
        let window_anchor = get_window_anchor((10, 401), Orientation::UpperLeft, screen_size);

        let mut local_hit_boxes = Vec::new();

        // Widget: selectdate_bg
        if let Some(sprite_selectdate_bg) = widget_cache.sprites.get("GFX_lobby_date_bg") {
            let size_selectdate_bg = sprite_selectdate_bg
                .target_size
                .unwrap_or(sprite_selectdate_bg.dimensions);
            let pos_selectdate_bg = position_from_anchor(
                window_anchor,
                (0, 0),
                Orientation::UpperLeft,
                size_selectdate_bg,
            );

            if let Some(border) = sprite_selectdate_bg.border_size {
                sprite_renderer.draw_cornered_tile(
                    render_pass,
                    sprite_selectdate_bg.bind_group.as_ref(),
                    queue,
                    pos_selectdate_bg.0,
                    pos_selectdate_bg.1,
                    size_selectdate_bg.0 as f32,
                    size_selectdate_bg.1 as f32,
                    border.0 as f32,
                    border.1 as f32,
                    sprite_selectdate_bg.dimensions.0,
                    sprite_selectdate_bg.dimensions.1,
                    screen_size,
                );
            } else if sprite_selectdate_bg.num_frames > 1 {
                // Multi-frame sprite: render only frame 0
                let frame_w = sprite_selectdate_bg.dimensions.0 / sprite_selectdate_bg.num_frames;
                let clip_selectdate_bg = rect_to_clip_space(
                    (pos_selectdate_bg.0, pos_selectdate_bg.1),
                    (frame_w, sprite_selectdate_bg.dimensions.1),
                    screen_size,
                );
                let u_max = 1.0 / sprite_selectdate_bg.num_frames as f32;
                sprite_renderer.draw_uv(
                    render_pass,
                    sprite_selectdate_bg.bind_group.as_ref(),
                    queue,
                    clip_selectdate_bg.0,
                    clip_selectdate_bg.1,
                    clip_selectdate_bg.2,
                    clip_selectdate_bg.3,
                    0.0,
                    0.0,
                    u_max,
                    1.0,
                );
            } else {
                let clip_selectdate_bg = rect_to_clip_space(
                    (pos_selectdate_bg.0, pos_selectdate_bg.1),
                    (size_selectdate_bg.0, size_selectdate_bg.1),
                    screen_size,
                );
                sprite_renderer.draw(
                    render_pass,
                    sprite_selectdate_bg.bind_group.as_ref(),
                    queue,
                    clip_selectdate_bg.0,
                    clip_selectdate_bg.1,
                    clip_selectdate_bg.2,
                    clip_selectdate_bg.3,
                );
            }
        }

        // TextBox: startdatelabel (font: vic_18) - no panel field mapping

        // EditBox: year -> panel.year_editor
        render_gui_editbox(
            &panel.year_editor,
            (101, 57),
            (80, 30),
            window_anchor,
            widget_cache,
            sprite_renderer,
            render_pass,
            queue,
            screen_size,
        );

        // TextBox: daymonth (font: vic_18) - no panel field mapping

        // Widget: year_up1
        if let Some(sprite_year_up1) = widget_cache.sprites.get("GFX_arrow_up_small") {
            let size_year_up1 = sprite_year_up1
                .target_size
                .unwrap_or(sprite_year_up1.dimensions);
            let pos_year_up1 = position_from_anchor(
                window_anchor,
                (111, 34),
                Orientation::UpperLeft,
                size_year_up1,
            );

            if let Some(border) = sprite_year_up1.border_size {
                sprite_renderer.draw_cornered_tile(
                    render_pass,
                    sprite_year_up1.bind_group.as_ref(),
                    queue,
                    pos_year_up1.0,
                    pos_year_up1.1,
                    size_year_up1.0 as f32,
                    size_year_up1.1 as f32,
                    border.0 as f32,
                    border.1 as f32,
                    sprite_year_up1.dimensions.0,
                    sprite_year_up1.dimensions.1,
                    screen_size,
                );
            } else if sprite_year_up1.num_frames > 1 {
                // Multi-frame sprite: render only frame 0
                let frame_w = sprite_year_up1.dimensions.0 / sprite_year_up1.num_frames;
                let clip_year_up1 = rect_to_clip_space(
                    (pos_year_up1.0, pos_year_up1.1),
                    (frame_w, sprite_year_up1.dimensions.1),
                    screen_size,
                );
                let u_max = 1.0 / sprite_year_up1.num_frames as f32;
                sprite_renderer.draw_uv(
                    render_pass,
                    sprite_year_up1.bind_group.as_ref(),
                    queue,
                    clip_year_up1.0,
                    clip_year_up1.1,
                    clip_year_up1.2,
                    clip_year_up1.3,
                    0.0,
                    0.0,
                    u_max,
                    1.0,
                );
            } else {
                let clip_year_up1 = rect_to_clip_space(
                    (pos_year_up1.0, pos_year_up1.1),
                    (size_year_up1.0, size_year_up1.1),
                    screen_size,
                );
                sprite_renderer.draw(
                    render_pass,
                    sprite_year_up1.bind_group.as_ref(),
                    queue,
                    clip_year_up1.0,
                    clip_year_up1.1,
                    clip_year_up1.2,
                    clip_year_up1.3,
                );
            }

            local_hit_boxes.push(HitBoxCmd {
                name: "year_up1".to_string(),
                hit_box: HitBox {
                    x: pos_year_up1.0,
                    y: pos_year_up1.1,
                    width: size_year_up1.0 as f32,
                    height: size_year_up1.1 as f32,
                },
            });
        }

        // Widget: year_down1
        if let Some(sprite_year_down1) = widget_cache.sprites.get("GFX_arrow_down_small") {
            let size_year_down1 = sprite_year_down1
                .target_size
                .unwrap_or(sprite_year_down1.dimensions);
            let pos_year_down1 = position_from_anchor(
                window_anchor,
                (111, 80),
                Orientation::UpperLeft,
                size_year_down1,
            );

            if let Some(border) = sprite_year_down1.border_size {
                sprite_renderer.draw_cornered_tile(
                    render_pass,
                    sprite_year_down1.bind_group.as_ref(),
                    queue,
                    pos_year_down1.0,
                    pos_year_down1.1,
                    size_year_down1.0 as f32,
                    size_year_down1.1 as f32,
                    border.0 as f32,
                    border.1 as f32,
                    sprite_year_down1.dimensions.0,
                    sprite_year_down1.dimensions.1,
                    screen_size,
                );
            } else if sprite_year_down1.num_frames > 1 {
                // Multi-frame sprite: render only frame 0
                let frame_w = sprite_year_down1.dimensions.0 / sprite_year_down1.num_frames;
                let clip_year_down1 = rect_to_clip_space(
                    (pos_year_down1.0, pos_year_down1.1),
                    (frame_w, sprite_year_down1.dimensions.1),
                    screen_size,
                );
                let u_max = 1.0 / sprite_year_down1.num_frames as f32;
                sprite_renderer.draw_uv(
                    render_pass,
                    sprite_year_down1.bind_group.as_ref(),
                    queue,
                    clip_year_down1.0,
                    clip_year_down1.1,
                    clip_year_down1.2,
                    clip_year_down1.3,
                    0.0,
                    0.0,
                    u_max,
                    1.0,
                );
            } else {
                let clip_year_down1 = rect_to_clip_space(
                    (pos_year_down1.0, pos_year_down1.1),
                    (size_year_down1.0, size_year_down1.1),
                    screen_size,
                );
                sprite_renderer.draw(
                    render_pass,
                    sprite_year_down1.bind_group.as_ref(),
                    queue,
                    clip_year_down1.0,
                    clip_year_down1.1,
                    clip_year_down1.2,
                    clip_year_down1.3,
                );
            }

            local_hit_boxes.push(HitBoxCmd {
                name: "year_down1".to_string(),
                hit_box: HitBox {
                    x: pos_year_down1.0,
                    y: pos_year_down1.1,
                    width: size_year_down1.0 as f32,
                    height: size_year_down1.1 as f32,
                },
            });
        }

        // Widget: year_up2
        if let Some(sprite_year_up2) = widget_cache.sprites.get("GFX_arrow_up_small") {
            let size_year_up2 = sprite_year_up2
                .target_size
                .unwrap_or(sprite_year_up2.dimensions);
            let pos_year_up2 = position_from_anchor(
                window_anchor,
                (131, 34),
                Orientation::UpperLeft,
                size_year_up2,
            );

            if let Some(border) = sprite_year_up2.border_size {
                sprite_renderer.draw_cornered_tile(
                    render_pass,
                    sprite_year_up2.bind_group.as_ref(),
                    queue,
                    pos_year_up2.0,
                    pos_year_up2.1,
                    size_year_up2.0 as f32,
                    size_year_up2.1 as f32,
                    border.0 as f32,
                    border.1 as f32,
                    sprite_year_up2.dimensions.0,
                    sprite_year_up2.dimensions.1,
                    screen_size,
                );
            } else if sprite_year_up2.num_frames > 1 {
                // Multi-frame sprite: render only frame 0
                let frame_w = sprite_year_up2.dimensions.0 / sprite_year_up2.num_frames;
                let clip_year_up2 = rect_to_clip_space(
                    (pos_year_up2.0, pos_year_up2.1),
                    (frame_w, sprite_year_up2.dimensions.1),
                    screen_size,
                );
                let u_max = 1.0 / sprite_year_up2.num_frames as f32;
                sprite_renderer.draw_uv(
                    render_pass,
                    sprite_year_up2.bind_group.as_ref(),
                    queue,
                    clip_year_up2.0,
                    clip_year_up2.1,
                    clip_year_up2.2,
                    clip_year_up2.3,
                    0.0,
                    0.0,
                    u_max,
                    1.0,
                );
            } else {
                let clip_year_up2 = rect_to_clip_space(
                    (pos_year_up2.0, pos_year_up2.1),
                    (size_year_up2.0, size_year_up2.1),
                    screen_size,
                );
                sprite_renderer.draw(
                    render_pass,
                    sprite_year_up2.bind_group.as_ref(),
                    queue,
                    clip_year_up2.0,
                    clip_year_up2.1,
                    clip_year_up2.2,
                    clip_year_up2.3,
                );
            }

            local_hit_boxes.push(HitBoxCmd {
                name: "year_up2".to_string(),
                hit_box: HitBox {
                    x: pos_year_up2.0,
                    y: pos_year_up2.1,
                    width: size_year_up2.0 as f32,
                    height: size_year_up2.1 as f32,
                },
            });
        }

        // Widget: year_down2
        if let Some(sprite_year_down2) = widget_cache.sprites.get("GFX_arrow_down_small") {
            let size_year_down2 = sprite_year_down2
                .target_size
                .unwrap_or(sprite_year_down2.dimensions);
            let pos_year_down2 = position_from_anchor(
                window_anchor,
                (131, 80),
                Orientation::UpperLeft,
                size_year_down2,
            );

            if let Some(border) = sprite_year_down2.border_size {
                sprite_renderer.draw_cornered_tile(
                    render_pass,
                    sprite_year_down2.bind_group.as_ref(),
                    queue,
                    pos_year_down2.0,
                    pos_year_down2.1,
                    size_year_down2.0 as f32,
                    size_year_down2.1 as f32,
                    border.0 as f32,
                    border.1 as f32,
                    sprite_year_down2.dimensions.0,
                    sprite_year_down2.dimensions.1,
                    screen_size,
                );
            } else if sprite_year_down2.num_frames > 1 {
                // Multi-frame sprite: render only frame 0
                let frame_w = sprite_year_down2.dimensions.0 / sprite_year_down2.num_frames;
                let clip_year_down2 = rect_to_clip_space(
                    (pos_year_down2.0, pos_year_down2.1),
                    (frame_w, sprite_year_down2.dimensions.1),
                    screen_size,
                );
                let u_max = 1.0 / sprite_year_down2.num_frames as f32;
                sprite_renderer.draw_uv(
                    render_pass,
                    sprite_year_down2.bind_group.as_ref(),
                    queue,
                    clip_year_down2.0,
                    clip_year_down2.1,
                    clip_year_down2.2,
                    clip_year_down2.3,
                    0.0,
                    0.0,
                    u_max,
                    1.0,
                );
            } else {
                let clip_year_down2 = rect_to_clip_space(
                    (pos_year_down2.0, pos_year_down2.1),
                    (size_year_down2.0, size_year_down2.1),
                    screen_size,
                );
                sprite_renderer.draw(
                    render_pass,
                    sprite_year_down2.bind_group.as_ref(),
                    queue,
                    clip_year_down2.0,
                    clip_year_down2.1,
                    clip_year_down2.2,
                    clip_year_down2.3,
                );
            }

            local_hit_boxes.push(HitBoxCmd {
                name: "year_down2".to_string(),
                hit_box: HitBox {
                    x: pos_year_down2.0,
                    y: pos_year_down2.1,
                    width: size_year_down2.0 as f32,
                    height: size_year_down2.1 as f32,
                },
            });
        }

        // Widget: year_up3
        if let Some(sprite_year_up3) = widget_cache.sprites.get("GFX_arrow_up_small") {
            let size_year_up3 = sprite_year_up3
                .target_size
                .unwrap_or(sprite_year_up3.dimensions);
            let pos_year_up3 = position_from_anchor(
                window_anchor,
                (151, 34),
                Orientation::UpperLeft,
                size_year_up3,
            );

            if let Some(border) = sprite_year_up3.border_size {
                sprite_renderer.draw_cornered_tile(
                    render_pass,
                    sprite_year_up3.bind_group.as_ref(),
                    queue,
                    pos_year_up3.0,
                    pos_year_up3.1,
                    size_year_up3.0 as f32,
                    size_year_up3.1 as f32,
                    border.0 as f32,
                    border.1 as f32,
                    sprite_year_up3.dimensions.0,
                    sprite_year_up3.dimensions.1,
                    screen_size,
                );
            } else if sprite_year_up3.num_frames > 1 {
                // Multi-frame sprite: render only frame 0
                let frame_w = sprite_year_up3.dimensions.0 / sprite_year_up3.num_frames;
                let clip_year_up3 = rect_to_clip_space(
                    (pos_year_up3.0, pos_year_up3.1),
                    (frame_w, sprite_year_up3.dimensions.1),
                    screen_size,
                );
                let u_max = 1.0 / sprite_year_up3.num_frames as f32;
                sprite_renderer.draw_uv(
                    render_pass,
                    sprite_year_up3.bind_group.as_ref(),
                    queue,
                    clip_year_up3.0,
                    clip_year_up3.1,
                    clip_year_up3.2,
                    clip_year_up3.3,
                    0.0,
                    0.0,
                    u_max,
                    1.0,
                );
            } else {
                let clip_year_up3 = rect_to_clip_space(
                    (pos_year_up3.0, pos_year_up3.1),
                    (size_year_up3.0, size_year_up3.1),
                    screen_size,
                );
                sprite_renderer.draw(
                    render_pass,
                    sprite_year_up3.bind_group.as_ref(),
                    queue,
                    clip_year_up3.0,
                    clip_year_up3.1,
                    clip_year_up3.2,
                    clip_year_up3.3,
                );
            }

            local_hit_boxes.push(HitBoxCmd {
                name: "year_up3".to_string(),
                hit_box: HitBox {
                    x: pos_year_up3.0,
                    y: pos_year_up3.1,
                    width: size_year_up3.0 as f32,
                    height: size_year_up3.1 as f32,
                },
            });
        }

        // Widget: year_down3
        if let Some(sprite_year_down3) = widget_cache.sprites.get("GFX_arrow_down_small") {
            let size_year_down3 = sprite_year_down3
                .target_size
                .unwrap_or(sprite_year_down3.dimensions);
            let pos_year_down3 = position_from_anchor(
                window_anchor,
                (151, 80),
                Orientation::UpperLeft,
                size_year_down3,
            );

            if let Some(border) = sprite_year_down3.border_size {
                sprite_renderer.draw_cornered_tile(
                    render_pass,
                    sprite_year_down3.bind_group.as_ref(),
                    queue,
                    pos_year_down3.0,
                    pos_year_down3.1,
                    size_year_down3.0 as f32,
                    size_year_down3.1 as f32,
                    border.0 as f32,
                    border.1 as f32,
                    sprite_year_down3.dimensions.0,
                    sprite_year_down3.dimensions.1,
                    screen_size,
                );
            } else if sprite_year_down3.num_frames > 1 {
                // Multi-frame sprite: render only frame 0
                let frame_w = sprite_year_down3.dimensions.0 / sprite_year_down3.num_frames;
                let clip_year_down3 = rect_to_clip_space(
                    (pos_year_down3.0, pos_year_down3.1),
                    (frame_w, sprite_year_down3.dimensions.1),
                    screen_size,
                );
                let u_max = 1.0 / sprite_year_down3.num_frames as f32;
                sprite_renderer.draw_uv(
                    render_pass,
                    sprite_year_down3.bind_group.as_ref(),
                    queue,
                    clip_year_down3.0,
                    clip_year_down3.1,
                    clip_year_down3.2,
                    clip_year_down3.3,
                    0.0,
                    0.0,
                    u_max,
                    1.0,
                );
            } else {
                let clip_year_down3 = rect_to_clip_space(
                    (pos_year_down3.0, pos_year_down3.1),
                    (size_year_down3.0, size_year_down3.1),
                    screen_size,
                );
                sprite_renderer.draw(
                    render_pass,
                    sprite_year_down3.bind_group.as_ref(),
                    queue,
                    clip_year_down3.0,
                    clip_year_down3.1,
                    clip_year_down3.2,
                    clip_year_down3.3,
                );
            }

            local_hit_boxes.push(HitBoxCmd {
                name: "year_down3".to_string(),
                hit_box: HitBox {
                    x: pos_year_down3.0,
                    y: pos_year_down3.1,
                    width: size_year_down3.0 as f32,
                    height: size_year_down3.1 as f32,
                },
            });
        }

        // Widget: month_down
        if let Some(sprite_month_down) = widget_cache.sprites.get("GFX_arrow_left_big") {
            let size_month_down = sprite_month_down
                .target_size
                .unwrap_or(sprite_month_down.dimensions);
            let pos_month_down = position_from_anchor(
                window_anchor,
                (20, 109),
                Orientation::UpperLeft,
                size_month_down,
            );

            if let Some(border) = sprite_month_down.border_size {
                sprite_renderer.draw_cornered_tile(
                    render_pass,
                    sprite_month_down.bind_group.as_ref(),
                    queue,
                    pos_month_down.0,
                    pos_month_down.1,
                    size_month_down.0 as f32,
                    size_month_down.1 as f32,
                    border.0 as f32,
                    border.1 as f32,
                    sprite_month_down.dimensions.0,
                    sprite_month_down.dimensions.1,
                    screen_size,
                );
            } else if sprite_month_down.num_frames > 1 {
                // Multi-frame sprite: render only frame 0
                let frame_w = sprite_month_down.dimensions.0 / sprite_month_down.num_frames;
                let clip_month_down = rect_to_clip_space(
                    (pos_month_down.0, pos_month_down.1),
                    (frame_w, sprite_month_down.dimensions.1),
                    screen_size,
                );
                let u_max = 1.0 / sprite_month_down.num_frames as f32;
                sprite_renderer.draw_uv(
                    render_pass,
                    sprite_month_down.bind_group.as_ref(),
                    queue,
                    clip_month_down.0,
                    clip_month_down.1,
                    clip_month_down.2,
                    clip_month_down.3,
                    0.0,
                    0.0,
                    u_max,
                    1.0,
                );
            } else {
                let clip_month_down = rect_to_clip_space(
                    (pos_month_down.0, pos_month_down.1),
                    (size_month_down.0, size_month_down.1),
                    screen_size,
                );
                sprite_renderer.draw(
                    render_pass,
                    sprite_month_down.bind_group.as_ref(),
                    queue,
                    clip_month_down.0,
                    clip_month_down.1,
                    clip_month_down.2,
                    clip_month_down.3,
                );
            }

            local_hit_boxes.push(HitBoxCmd {
                name: "month_down".to_string(),
                hit_box: HitBox {
                    x: pos_month_down.0,
                    y: pos_month_down.1,
                    width: size_month_down.0 as f32,
                    height: size_month_down.1 as f32,
                },
            });
        }

        // Widget: day_down
        if let Some(sprite_day_down) = widget_cache.sprites.get("GFX_arrow_left_small") {
            let size_day_down = sprite_day_down
                .target_size
                .unwrap_or(sprite_day_down.dimensions);
            let pos_day_down = position_from_anchor(
                window_anchor,
                (42, 109),
                Orientation::UpperLeft,
                size_day_down,
            );

            if let Some(border) = sprite_day_down.border_size {
                sprite_renderer.draw_cornered_tile(
                    render_pass,
                    sprite_day_down.bind_group.as_ref(),
                    queue,
                    pos_day_down.0,
                    pos_day_down.1,
                    size_day_down.0 as f32,
                    size_day_down.1 as f32,
                    border.0 as f32,
                    border.1 as f32,
                    sprite_day_down.dimensions.0,
                    sprite_day_down.dimensions.1,
                    screen_size,
                );
            } else if sprite_day_down.num_frames > 1 {
                // Multi-frame sprite: render only frame 0
                let frame_w = sprite_day_down.dimensions.0 / sprite_day_down.num_frames;
                let clip_day_down = rect_to_clip_space(
                    (pos_day_down.0, pos_day_down.1),
                    (frame_w, sprite_day_down.dimensions.1),
                    screen_size,
                );
                let u_max = 1.0 / sprite_day_down.num_frames as f32;
                sprite_renderer.draw_uv(
                    render_pass,
                    sprite_day_down.bind_group.as_ref(),
                    queue,
                    clip_day_down.0,
                    clip_day_down.1,
                    clip_day_down.2,
                    clip_day_down.3,
                    0.0,
                    0.0,
                    u_max,
                    1.0,
                );
            } else {
                let clip_day_down = rect_to_clip_space(
                    (pos_day_down.0, pos_day_down.1),
                    (size_day_down.0, size_day_down.1),
                    screen_size,
                );
                sprite_renderer.draw(
                    render_pass,
                    sprite_day_down.bind_group.as_ref(),
                    queue,
                    clip_day_down.0,
                    clip_day_down.1,
                    clip_day_down.2,
                    clip_day_down.3,
                );
            }

            local_hit_boxes.push(HitBoxCmd {
                name: "day_down".to_string(),
                hit_box: HitBox {
                    x: pos_day_down.0,
                    y: pos_day_down.1,
                    width: size_day_down.0 as f32,
                    height: size_day_down.1 as f32,
                },
            });
        }

        // Widget: month_up
        if let Some(sprite_month_up) = widget_cache.sprites.get("GFX_arrow_right_big") {
            let size_month_up = sprite_month_up
                .target_size
                .unwrap_or(sprite_month_up.dimensions);
            let pos_month_up = position_from_anchor(
                window_anchor,
                (237, 109),
                Orientation::UpperLeft,
                size_month_up,
            );

            if let Some(border) = sprite_month_up.border_size {
                sprite_renderer.draw_cornered_tile(
                    render_pass,
                    sprite_month_up.bind_group.as_ref(),
                    queue,
                    pos_month_up.0,
                    pos_month_up.1,
                    size_month_up.0 as f32,
                    size_month_up.1 as f32,
                    border.0 as f32,
                    border.1 as f32,
                    sprite_month_up.dimensions.0,
                    sprite_month_up.dimensions.1,
                    screen_size,
                );
            } else if sprite_month_up.num_frames > 1 {
                // Multi-frame sprite: render only frame 0
                let frame_w = sprite_month_up.dimensions.0 / sprite_month_up.num_frames;
                let clip_month_up = rect_to_clip_space(
                    (pos_month_up.0, pos_month_up.1),
                    (frame_w, sprite_month_up.dimensions.1),
                    screen_size,
                );
                let u_max = 1.0 / sprite_month_up.num_frames as f32;
                sprite_renderer.draw_uv(
                    render_pass,
                    sprite_month_up.bind_group.as_ref(),
                    queue,
                    clip_month_up.0,
                    clip_month_up.1,
                    clip_month_up.2,
                    clip_month_up.3,
                    0.0,
                    0.0,
                    u_max,
                    1.0,
                );
            } else {
                let clip_month_up = rect_to_clip_space(
                    (pos_month_up.0, pos_month_up.1),
                    (size_month_up.0, size_month_up.1),
                    screen_size,
                );
                sprite_renderer.draw(
                    render_pass,
                    sprite_month_up.bind_group.as_ref(),
                    queue,
                    clip_month_up.0,
                    clip_month_up.1,
                    clip_month_up.2,
                    clip_month_up.3,
                );
            }

            local_hit_boxes.push(HitBoxCmd {
                name: "month_up".to_string(),
                hit_box: HitBox {
                    x: pos_month_up.0,
                    y: pos_month_up.1,
                    width: size_month_up.0 as f32,
                    height: size_month_up.1 as f32,
                },
            });
        }

        // Widget: day_up
        if let Some(sprite_day_up) = widget_cache.sprites.get("GFX_arrow_right_small") {
            let size_day_up = sprite_day_up
                .target_size
                .unwrap_or(sprite_day_up.dimensions);
            let pos_day_up = position_from_anchor(
                window_anchor,
                (215, 109),
                Orientation::UpperLeft,
                size_day_up,
            );

            if let Some(border) = sprite_day_up.border_size {
                sprite_renderer.draw_cornered_tile(
                    render_pass,
                    sprite_day_up.bind_group.as_ref(),
                    queue,
                    pos_day_up.0,
                    pos_day_up.1,
                    size_day_up.0 as f32,
                    size_day_up.1 as f32,
                    border.0 as f32,
                    border.1 as f32,
                    sprite_day_up.dimensions.0,
                    sprite_day_up.dimensions.1,
                    screen_size,
                );
            } else if sprite_day_up.num_frames > 1 {
                // Multi-frame sprite: render only frame 0
                let frame_w = sprite_day_up.dimensions.0 / sprite_day_up.num_frames;
                let clip_day_up = rect_to_clip_space(
                    (pos_day_up.0, pos_day_up.1),
                    (frame_w, sprite_day_up.dimensions.1),
                    screen_size,
                );
                let u_max = 1.0 / sprite_day_up.num_frames as f32;
                sprite_renderer.draw_uv(
                    render_pass,
                    sprite_day_up.bind_group.as_ref(),
                    queue,
                    clip_day_up.0,
                    clip_day_up.1,
                    clip_day_up.2,
                    clip_day_up.3,
                    0.0,
                    0.0,
                    u_max,
                    1.0,
                );
            } else {
                let clip_day_up = rect_to_clip_space(
                    (pos_day_up.0, pos_day_up.1),
                    (size_day_up.0, size_day_up.1),
                    screen_size,
                );
                sprite_renderer.draw(
                    render_pass,
                    sprite_day_up.bind_group.as_ref(),
                    queue,
                    clip_day_up.0,
                    clip_day_up.1,
                    clip_day_up.2,
                    clip_day_up.3,
                );
            }

            local_hit_boxes.push(HitBoxCmd {
                name: "day_up".to_string(),
                hit_box: HitBox {
                    x: pos_day_up.0,
                    y: pos_day_up.1,
                    width: size_day_up.0 as f32,
                    height: size_day_up.1 as f32,
                },
            });
        }

        // Register hit boxes
        for cmd in local_hit_boxes {
            hit_boxes.push((cmd.name, cmd.hit_box));
        }
    }
}
